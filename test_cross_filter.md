# クロスフィルター動作確認

## 確認項目

### 1. Dashboard表示確認
- ✅ 円グラフ（ステータス別売上）が表示されている
- ✅ テーブル（受注詳細）が表示されている

### 2. データ確認

#### 円グラフに表示されるべきデータ
- 新規: ¥48,000 (3件)
- 進行中: ¥98,000 (5件)
- 遅延: ¥75,000 (2件)

#### テーブルに表示されるべきデータ（初期状態）
全10件のデータ

### 3. クロスフィルター動作確認

#### テスト1: 円グラフで「進行中」をクリック
**期待結果**:
- テーブルに5件のデータのみ表示される
- 全て status = '進行中' のデータ
- 顧客: J, C, D, E, F

#### テスト2: 円グラフで「新規」をクリック
**期待結果**:
- テーブルに3件のデータのみ表示される
- 全て status = '新規' のデータ
- 顧客: I, A, B

#### テスト3: 円グラフで「遅延」をクリック
**期待結果**:
- テーブルに2件のデータのみ表示される
- 全て status = '遅延' のデータ
- 顧客: G, H

#### テスト4: フィルター解除
円グラフの選択を解除（もう一度クリック）
**期待結果**:
- テーブルに全10件のデータが表示される

### 4. 期間フィルター動作確認（追加した場合）

#### テスト5: 期間を「Last 7 days」に設定
**期待結果**:
- 円グラフに「新規」のみ表示される（3件）
- テーブルにも新規の3件のみ表示される

#### テスト6: 期間を「Last 30 days」に設定
**期待結果**:
- 円グラフに「新規」と「進行中」が表示される（8件）
- 「遅延」は表示されない（35日以上前のデータ）

### 5. RLS（部署フィルタリング）との組み合わせ

既存のGuest Token機能と組み合わせる場合：

```bash
# 部署101のデータのみ表示
curl "http://localhost:3001/api/superset/guest-token?departmentId=101"
```

**期待されるデータ**:
```sql
SELECT * FROM orders WHERE department_id = 101;
-- 顧客A, B, G, J の4件
```

**ステータス内訳**:
- 新規: 2件（顧客A, B）
- 進行中: 1件（顧客J）
- 遅延: 1件（顧客G）

## 動作確認結果

現在の状況を教えてください：
- [ ] クロスフィルターは有効化されていますか？
- [ ] 円グラフをクリックしてテーブルがフィルタリングされますか？
- [ ] 期間フィルターは追加しましたか？
- [ ] RLSとの組み合わせは必要ですか？
